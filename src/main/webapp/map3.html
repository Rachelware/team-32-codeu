<!DOCTYPE html>
<html>
<head>
    <title>Marker Storage</title>
    <link rel = "stylesheet" href = "/css/main.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZkWQmagGmCHKRX2osG0BSWiUYLOZaxWA"></script>
    <script>
        function createMap(){
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 38.5949, lng: -94.8923},
                zoom: 4
            });
             // When the user clicks in the map, show a marker with a text box the user can edit.
            map.addListener('click', (event) => {
                createMarkerForEdit(event.latLng.lat(), event.latLng.lng());
            });
            fetchMarkers();
        }

        /** Creates a marker that shows a textbox the user can edit. */
        function createMarkerForEdit(lat, lng){
            // If we're already showing an editable marker, then remove it.
            if(editMarker){
                editMarker.setMap(null);
            }
            editMarker = new google.maps.Marker({
                position: {lat: lat, lng: lng},
                map: map
            });
            const infoWindow = new google.maps.InfoWindow({
                content: buildInfoWindowInput(lat, lng)
            });
            // When the user closes the editable info window, remove the marker.
            google.maps.event.addListener(infoWindow, 'closeclick', () => {
                editMarker.setMap(null);
            });
            infoWindow.open(map, editMarker);
        }
        



    </script>
    <style>
        #map {
            width: 500px;
            height: 500px;
            border: thin solid black;
        }
    </style>
</head>
<body onload="createMap();">
    <h1>Marker Storage</h1>
    <div id="map"></div>
    <p>Click on map to create a new marker</p>
</body>
</html>